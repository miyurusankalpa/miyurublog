{"componentChunkName":"component---src-templates-blog-post-js","path":"/s12-pro-ipv6-issue/","result":{"data":{"site":{"siteMetadata":{"title":"Miyuru Tech Blog"}},"markdownRemark":{"id":"fd92af3f-2f13-5037-93e6-e6b71d4c7a2a","excerpt":"I got a new router from a new ISP to check its IPv6 support. The router (ZLT S12 Pro) has an interesting IPv6 bug. Its IPv6 connection gets disconnected onâ€¦","html":"<p>I got a new router from a new ISP to check its IPv6 support. The router (ZLT S12 Pro) has an interesting IPv6 bug. Its IPv6 connection gets disconnected on Linux and is completely unusable on Android.</p>\n<p>I checked the SLAAC settings using the <strong>rdisc6</strong> tool, and it seems the router sends the following values:</p>\n<ul>\n<li>Router lifetime: 4 minutes</li>\n<li>Valid time: 4 minutes</li>\n<li>Preferred time: 2 minutes</li>\n</ul>\n<p>These are the maximum values, and they get lower over time because of the timers on successive solicitations.</p>\n<pre class=\"grvsc-container abyss\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Hop limit                 :           64 (      0x40)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Stateful address conf.    :           No</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Stateful other conf.      :          Yes</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Mobile home agent         :           No</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Router preference         :       medium</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Neighbor discovery proxy  :           No</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Router lifetime           :          189 (0x000000bd) seconds</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Reachable time            :  unspecified (0x00000000)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Retransmit time           :  unspecified (0x00000000)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> Source link-layer address: 98:A9:42:9C:68:21</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> MTU                      :         1500 bytes (valid)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> Prefix                   : 2001:db8:a400:xxxx::/64</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  On-link                 :          Yes</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Autonomous address conf.:          Yes</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Valid time              :          191 (0x000000bf) seconds</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Pref. time              :           71 (0x00000047) seconds</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> Recursive DNS server     : 2001:db8:a400:xxxx:xxxx:xxxx:xxxx:xxxx</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  DNS server lifetime     :          189 (0x000000bd) seconds</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> from fe80::9aa9:42ff:fe9c:6821</span></span></code></pre>\n<p>There are multiple problems here.</p>\n<ol>\n<li>These values are too low and should not be dynamic on a end users router.</li>\n<li>Android discards lifetimes lower than 3 minutes. [IPv6 RA with AdvDefaultLifetime less than 180s not accepted by Android</li>\n</ol>\n<p>](<a href=\"https://issuetracker.google.com/issues/428412059\">https://issuetracker.google.com/issues/428412059</a>)</p>\n<ol start=\"3\">\n<li>The router also uses the preferred time as a timer. All values reset when it reaches zero. At zero it sometimes it sends an RA packet with a <strong>0 router lifetime</strong>, which should not happen.</li>\n</ol>\n<pre class=\"grvsc-container abyss\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Hop limit                 :           64 (      0x40)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Stateful address conf.    :           No</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Stateful other conf.      :          Yes</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Mobile home agent         :           No</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Router preference         :       medium</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Neighbor discovery proxy  :           No</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Router lifetime           :            0 (0x00000000) seconds</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Reachable time            :  unspecified (0x00000000)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Retransmit time           :  unspecified (0x00000000)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> Source link-layer address: 98:A9:42:9C:68:21</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> MTU                      :         1500 bytes (valid)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> Recursive DNS server     : fe80::9aa9:42ff:fe9c:6821</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  DNS server lifetime     :         1800 (0x00000708) seconds</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> from fe80::9aa9:42ff:fe9c:6821</span></span></code></pre>\n<p>This also triggers another Android bug. Which discards the IPv6 connection <a href=\"https://issuetracker.google.com/issues/429703129\">Android loses IPv6 route after RA with lifetime 0 and refuses to restore it\n</a></p>\n<p>One of the way to fix it is the router should use static values and implement the guidelines in:\n<a href=\"https://datatracker.ietf.org/doc/html/draft-ietf-6man-slaac-renum-02#section-4.1.1\">draft-ietf-6man-slaac-renum-02 Section 4.1.1</a></p>\n<p>I have reached to the ISP to fix this issue. Will update this post when they fix it.</p>\n<blockquote>\n<p><strong>Update:</strong> The ISP did not fix the issue; however, I managed to solve it myself.</p>\n<p>ðŸ‘‰ <strong>New Post:</strong> <a href=\"https://blog.miyuru.lk/zlt-ipv6-fixes/\">https://blog.miyuru.lk/zlt-ipv6-fixes/</a></p>\n</blockquote>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .abyss { background-color: #000c18; }\n  .abyss .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"title":"IPv6 Keeps Breaking on Android with ZLT S12 Pro Router","date":"November 26, 2025","description":"ZLT S12 Pro IPv6 SLAAC timers are too low and unstable, causing Linux disconnects and Android bugs due to invalid lifetimes."}},"previous":{"fields":{"slug":"/linux-hosts-aaaa-records/"},"frontmatter":{"title":"The Curious Case of IPv6 CNAME Chains on Linux Hosts"}},"next":{"fields":{"slug":"/zlt-ipv6-fixes/"},"frontmatter":{"title":"Fixing IPv6 and Performance Issues on ZLT S12 Pro Router (OpenWrt)"}}},"pageContext":{"id":"fd92af3f-2f13-5037-93e6-e6b71d4c7a2a","previousPostId":"780a5c37-4efb-5ded-84ba-ee227b6d45aa","nextPostId":"ae36da97-be68-5ee0-93f9-2c92cb79739f"}},"staticQueryHashes":["1888224856","2841359383"],"slicesMap":{}}