<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" CONTENT="text/html; charset=utf-8">
<title>HTTP to HTTPS NGINX</title>
<style>
    body {
        width: 50%;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
	code {
    display: block;
    overflow-x: auto;
    padding: 0.5em;
    background: #333;
    color: white;
</style>
</head>
<body>
<h1><a id="HTTP_to_HTTPS_NGINX_0"></a>HTTP to HTTPS NGINX</h1>
<p>There are 2 methods to redirect to https in Nginx</p>
<p>1st method is to create a seperate server block for port 80 and redirect all to https</p>
<p><code>server {</code>
<code>	listen 80; //ipv4</code>
<code>	listen [::]:80; //ipv6</code>
<code>	server_name example.com;</code>
<code>	return 301 https://$host$request_uri;</code>
<code>}</code></p>

<p>2nd method is to add a if statement and redirect only if the check is true.<br>

<code>if ($scheme = http) { </code>
<code>return 301 https://$host$request_uri; </code>
<code>}</code></p>
<p>if you use cloudflare you can use the following confiartion to redrect traffic to htps</p>
<p><code>if ($http_cf_visitor ~ '{&quot;scheme&quot;:&quot;http&quot;}') { </code>
<code>return 301 https://$host$request_uri; </code>
 <code>}</code></p>
</body>
</html>
